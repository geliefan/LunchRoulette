## 1. 要求定義書テンプレート案（Lunch Roulette / Hot Pepper 版）

インターン教材として「学生がヒアリングシートをもとに要求定義書を書いてくる」前提で、
骨組み＋サンプル記述まで入れたテンプレート案です。
（`★`付きは学生に考えさせたいポイントの例）

---

### 0. ドキュメント情報

| 項目    | 内容                   |
| ----- | -------------------- |
| 文書名   | Lunch Roulette 要求定義書 |
| バージョン | 0.1（ドラフト）            |
| 作成日   | 2025-xx-xx           |
| 作成者   | インターン参加者 氏名          |
| 承認者   | 担当講師 氏名              |

---

### 1. 背景・目的

1.1 背景

- 都内オフィスで働く社員は、昼休み 1 時間の中で「店を探す時間」が負担になっている。
- グループで行く場合は人数・予算・距離・好みの調整が手間。
- 店選びがマンネリ化しており、新しい店を開拓しづらい。

★学生向けタスク例：
「自分の大学生活・バイト経験も踏まえて“ランチで困ること”を3つくらい書かせる」

1.2 目的

- ユーザの現在地と条件に合わせて、その日のランチ候補を自動で 1 件ルーレット提示する。
- 「行き先を決める時間・心理的負担」を減らしつつ、行ったことのない店も提案する。
- 将来的には、1day インターンの題材として

  - 要件定義
  - API 仕様理解
  - Web アプリ開発（Flask＋外部API）の実践
    を経験させる。

---

### 2. ステークホルダー

| 区分        | 役割・関心事                 |
| --------- | ---------------------- |
| 利用者       | 社内のランチユーザ（若手社員・インターン等） |
| プロダクトオーナー | サービス企画担当（例：人事・教育担当）    |
| 開発チーム     | インターン参加者＋メンター          |
| 運用担当      | 社内のシステム管理担当（PoC サーバ運用） |

★学生には「それぞれが何を重視しそうか」を 1 行ずつ書かせるとよい。

---

### 3. 用語定義

| 用語             | 定義                                                                 |
| -------------- | ------------------------------------------------------------------ |
| Lunch Roulette | 本サービスの名称。ランチ候補をランダムに 1 件提示する Web アプリ                               |
| ランチ予算カテゴリ      | Hot Pepper グルメ API の「ディナー予算コード」を元にした、ランチ予算の目安カテゴリ                  |
| 徒歩時間           | ユーザが移動に許容できる片道時間（分）。range に変換して検索に利用                               |
| range          | Hot Pepper API の距離パラメータ（1:300m, 2:500m, 3:1000m, 4:2000m, 5:3000m） |

---

### 4. システム全体像（概要）

4.1 システム構成（ざっくり）

- フロントエンド

  - シングルページ相当の画面（検索条件入力＋結果表示）
  - HTML/CSS/JavaScript（バニラ）

- バックエンド

  - Flask (Python) による REST API
  - `/roulette`：ランチ候補 1 件を返す
  - SQLite による簡易ログ（履歴・学習用）

- 外部サービス

  - Hot Pepper グルメ グルメサーチ API（必須）
  - 天気 API（任意：行き先提案の賢さ向上用）
  - IP 位置情報 API（任意：位置情報の自動推定）

4.2 想定利用シーン

- 都内オフィス勤務の社員が、昼休み開始前に PC やスマホブラウザでアクセス。
- 条件（予算・徒歩時間 etc）を指定 → 候補 1 件が表示 → そのまま地図アプリへ飛ぶ。

---

### 5. 業務・ユーザ要求（ビジネス要求）

5.1 ユーザ像

- 20〜30 代のオフィスワーカー・インターン学生。
- IT リテラシーは中程度（Webフォームは問題ないが、専門的用語は避けたい）。
- 昼休みは 60 分前後、移動に使えるのは片道 5〜15 分程度。

5.2 期待する価値

1. 店選びにかける時間を減らしたい。
2. 「毎回同じ店」から脱却し、新しい店を発見したい。
3. 予算オーバーの店を避けたい。
4. 雨の日は遠くまで歩きたくない。

★ここはヒアリングシートから学生に書かせる領域。

---

### 6. 機能要求

#### 6.1 検索条件入力機能

- 必須項目

  - 現在地

    - GPS（ブラウザの Geolocation API）
    - もしくは駅名／住所などからの手動入力（初期版は駅名選択程度でも可）
  - ランチ予算カテゴリ範囲

    - UI 上は

      - 「〜 1,000 円」「1,001〜 2,000 円」「2,001〜 3,000 円」...
      - 内部では Hot Pepper の `budget.code`（検索用ディナー予算コード）を使用
  - 徒歩時間（最大）

    - 5 / 10 / 15 / 20 分などの候補から選択
    - サーバ側で range（1〜5）に変換して API に渡す

- 任意項目

  - ジャンル（ラーメン・カレー・定食・カフェ など）

    - Hot Pepper のジャンルコードを利用
  - 喫煙／禁煙、ランチあり、クレジットカード可 等のこだわり条件
    （Hot Pepper API のパラメータ `non_smoking`, `lunch`, `card` などをマッピング）

#### 6.2 店舗検索・ルーレット機能

1. 入力条件をもとに Hot Pepper API へ店舗検索を行う。
2. 検索結果から、内部ロジックで 1 件を選択する。

   - デフォルト：完全ランダム
   - 拡張：過去に行った店を避ける／最近行っていない店を優先 など
3. 選ばれた店舗情報を JSON 形式で返す。

   - 店名／住所／ジャンル／平均予算（ディナー）／ランチの有無／URL など。

#### 6.3 結果表示機能

- フロントエンドで JSON を受け取り、以下を表示

  - 店名、簡易キャッチコピー
  - 住所・最寄り駅・徒歩時間目安（距離から計算）
  - ランチ有無、平均ディナー予算（ランチの目安として説明付き表示）
  - 店舗ページへのリンク
- 再ルーレット（「もう一度回す」ボタン）

#### 6.4 ログ・学習用機能（インターン教材向け）

- 最低限、以下を SQLite 等に記録

  - 実行日時
  - 条件（予算カテゴリ、徒歩時間、天気など）
  - 選ばれた店舗 ID
  - 学生によるテストデータとして利用可能にする。

---

### 7. 非機能要求

一般的な要件定義書でも「機能と非機能を分けて書く」のが推奨されているので、教材としても分けておく。

7.1 性能

- 1 リクエストあたりのレスポンス時間の目安

  - 通常時：3 秒以内（Hot Pepper API のレスポンス時間を含む）
- 同時アクセス

  - 1day インターンの PoC としては 10 ユーザ程度を想定。

7.2 可用性

- インターン期間中は基本稼働。
- 外部 API 障害時は「今日は店を選べませんでした」のようなフェールソフトなメッセージを返す。

7.3 操作性（UI/UX）

- 1 画面以内で完結（条件入力＋結果表示）。
- スマホ表示にも対応（レスポンシブ対応）。

7.4 セキュリティ

- API キーは環境変数で管理し、リポジトリにコミットしない。
- 外部公開時は、利用規約に反しない範囲で利用する（キャッシュ・保存方法等を含める）。

7.5 運用・保守

- API キー更新手順を README に明記。
- 外部 API の仕様変更チェックは年 1 回程度（教材として「仕様確認の大事さ」を教えるネタにする）。

---

### 8. 外部インターフェース要求

8.1 Hot Pepper グルメ API

- エンドポイント：`/hotpepper/gourmet/v1/`

- 主な入力パラメータ

  - `key`：API キー
  - `lat`, `lng`：緯度・経度
  - `range`：距離レンジ（1〜5）
  - `budget`：検索用ディナー予算コード（複数指定可）
  - `lunch`：ランチありフラグ（0/1）
  - `count`：取得件数（1〜100）

- 主な出力フィールド

  - `shop[].name`, `address`, `lat`, `lng`
  - `budget.code`, `budget.name`, `budget.average`
  - `lunch`, `urls.pc`, など

★学生には「外部 API の仕様をどう要件定義書側に落とすか」を考えさせる。

---

### 9. 制約条件・前提

- 無料プランの範囲内で利用する（リクエスト数の上限 etc）。
- データの二次利用（スクレイピング保存・再配布）はしない。
- インターン用の社内環境（Python, Flask, SQLite）が利用できる。
- 本サービスは「ランチ予算を完全に正確に反映するものではなく、ディナー予算を目安にした補助ツール」であることを、利用者に明示する。

---

### 10. 成功基準（インターン教材として）

- ビジネス側（例：人事・教育担当）が「ランチ選びの手間が減りそう」と感じる。
- インターン生が

  - ヒアリングシート
  - 要求定義書
  - API 仕様
    を一通り読めるようになる。
- 最低 1 つのルーレット機能が完成し、デモができる。
